"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[959],{644:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>c});const d=JSON.parse('{"id":"integracoes/integracao-via-intent-android/estorno","title":"Estorno","description":"Exemplo de chamada","source":"@site/docs/integracoes/integracao-via-intent-android/estorno.md","sourceDirName":"integracoes/integracao-via-intent-android","slug":"/integracoes/integracao-via-intent-android/estorno","permalink":"/docs/integracoes/integracao-via-intent-android/estorno","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Pagamento","permalink":"/docs/integracoes/integracao-via-intent-android/pagamento"},"next":{"title":"Troca de arquivos","permalink":"/docs/category/troca-de-arquivos"}}');var t=n(4848),s=n(8453);const i={sidebar_position:4},a="Estorno",o={},c=[{value:"Exemplo de chamada",id:"exemplo-de-chamada",level:2},{value:"Como validar a resposta",id:"como-validar-a-resposta",level:2},{value:"<strong>Par\xe2metros do <code>bundle</code></strong>",id:"par\xe2metros-do-bundle",level:2},{value:"Par\xe2metros da resposta",id:"par\xe2metros-da-resposta",level:2}];function l(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"estorno",children:"Estorno"})}),"\n",(0,t.jsx)(r.h2,{id:"exemplo-de-chamada",children:"Exemplo de chamada"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'public class ConnectTEFAdapter {\r\n    public void realizarEstorno(Activity activity, int requestCode) {\r\n        Intent intent = new Intent();\r\n        intent.setComponent(new ComponentName("br.com.pdvpos.connecttef.gerenciador", "br.com.pdvpos.connecttef.gerenciador.MainActivity"));\r\n\r\n        if (intent.resolveActivity(getPackageManager()) != null) {\r\n            intent.putString("identificacao", "abc123");\r\n            intent.putDouble("valorTotal", 29.90);\r\n            intent.putString("tipoTransacao", "10");\r\n            intent.putString("numeroTransacao", "abc123");\r\n            intent.putString("finalizacao", "abc123|abc123|zbc123");\r\n            activity.startActivityForResult(intent, requestCode);\r\n        } else {\r\n            Toast.makeText(this, "Aplicativo externo n\xe3o encontrado.", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"como-validar-a-resposta",children:"Como validar a resposta"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-java",children:'public class MainActivity extends AppCompatActivity {\r\n\r\n    private static final String TAG = "ConnectTEF";\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (data == null) {\r\n            Log.w(TAG, "Opera\xe7\xe3o cancelada");\r\n            return;\r\n        }\r\n\r\n        Bundle bundle = data.getExtras();\r\n        if (bundle == null) {\r\n            Log.w(TAG, "Opera\xe7\xe3o cancelada");\r\n            return;\r\n        }\r\n\r\n        if (resultCode != RESULT_OK) {\r\n            String mensagemErro = bundle.getString("textoEspecialOperador");\r\n            if (mensagemErro != null) {\r\n                Log.w(TAG, "Mensagem de erro: " + mensagemErro);\r\n            } else {\r\n                Log.w(TAG, "Erro na opera\xe7\xe3o, mas sem mensagem espec\xedfica.");\r\n            }\r\n            return;\r\n        }\r\n        \r\n        for (String key : bundle.keySet()) {\r\n            Object value = bundle.get(key);\r\n            Log.d(TAG, key + " => " + value);\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(r.h2,{id:"par\xe2metros-do-bundle",children:(0,t.jsxs)(r.strong,{children:["Par\xe2metros do ",(0,t.jsx)(r.code,{children:"bundle"})]})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Campo"}),(0,t.jsx)(r.th,{children:"Tipo"}),(0,t.jsx)(r.th,{children:"Obrigat\xf3rio"}),(0,t.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"identificacao"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"string"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Sim"})}),(0,t.jsx)(r.td,{children:"ID \xfanico da transa\xe7\xe3o no seu sistema."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"valorTotal"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"decimal"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Sim"})}),(0,t.jsxs)(r.td,{children:["Valor total da venda. Ex: ",(0,t.jsx)(r.code,{children:"29.9"})," para R$29,90"]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"tipoTransacao"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"string"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Sim"})}),(0,t.jsx)(r.td,{children:"C\xf3digo da transa\xe7\xe3o (veja tabela abaixo)."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"quantidadeParcelas"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"string"})}),(0,t.jsx)(r.td,{children:"N\xe3o"}),(0,t.jsxs)(r.td,{children:["N\xba de parcelas. Ex: ",(0,t.jsx)(r.code,{children:'"1"'}),"."]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"imprimirComprovante"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"bool"})}),(0,t.jsx)(r.td,{children:"N\xe3o"}),(0,t.jsx)(r.td,{children:"Imprime comprovante no POS."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"numeroTransacao"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"string"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Sim"})}),(0,t.jsx)(r.td,{children:"N\xfamero \xfanico da transa\xe7\xe3o fornecido pela adquirente."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"finalizacao"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"string"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Sim"})}),(0,t.jsx)(r.td,{children:"Finaliza\xe7\xe3o obtida na resposta ao realizar um pagamento."})]})]})]}),"\n",(0,t.jsx)(r.h2,{id:"par\xe2metros-da-resposta",children:"Par\xe2metros da resposta"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Campo"}),(0,t.jsx)(r.th,{children:"Tipo"}),(0,t.jsx)(r.th,{children:"Descri\xe7\xe3o"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"identificacao"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Identificador \xfanico da opera\xe7\xe3o"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"valorTotal"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Valor total da transa\xe7\xe3o"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"statusTransacao"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:'"0" = sucesso; outros valores indicam falha'})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"nomeRede"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Nome da adquirente"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"tipoTransacao"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Tipo da transa\xe7\xe3o"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"numeroTransacao"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"N\xfamero sequencial da transa\xe7\xe3o"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"codigoAutorizacaoTransacao"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"C\xf3digo de autoriza\xe7\xe3o fornecido pela adquirente"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"quantidadeParcelas"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"N\xfamero de parcelas"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"dataTransacaoComprovante"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Data da transa\xe7\xe3o no comprovante (formato: ddMMyyyy)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"horaTransacaoComprovante"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Hora da transa\xe7\xe3o no comprovante (formato: hhmmss)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"numeroTransacaoCancelada"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"N\xfamero da transa\xe7\xe3o que foi cancelada"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"timestampTransacaoCancelada"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Timestamp da transa\xe7\xe3o cancelada (formato: ddMMhhmmss)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"finalizacao"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Dados t\xe9cnicos da finaliza\xe7\xe3o da transa\xe7\xe3o"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"quantidadeLinhasComprovante"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Quantidade de linhas no comprovante"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"textoEspecialOperador"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Mensagem especial para exibi\xe7\xe3o ao operador"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"numeroSerieTerminal"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"N\xfamero de s\xe9rie do terminal (Smart POS)"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"executada"})}),(0,t.jsx)(r.td,{children:"boolean"}),(0,t.jsx)(r.td,{children:"Indica se a opera\xe7\xe3o foi processada com sucesso"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"cnpj"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"CNPJ do estabelecimento"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"bandeiraCartao"})}),(0,t.jsx)(r.td,{children:"string"}),(0,t.jsx)(r.td,{children:"Bandeira do cart\xe3o utilizado (ex: MASTERCARD)"})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>a});var d=n(6540);const t={},s=d.createContext(t);function i(e){const r=d.useContext(s);return d.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),d.createElement(s.Provider,{value:r},e.children)}}}]);