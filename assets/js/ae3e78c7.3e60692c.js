"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[1174],{1172:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"integracoes/integracao-via-api/vinculacao","title":"Vincula\xe7\xe3o","description":"Antes de qualquer transa\xe7\xe3o, o POS precisa estar vinculado a um ponto de venda (PDV ou sistema ERP). Esse processo associa o POS ao sistema e define o webhook que receber\xe1 os eventos.","source":"@site/docs/integracoes/integracao-via-api/vinculacao.md","sourceDirName":"integracoes/integracao-via-api","slug":"/integracoes/integracao-via-api/vinculacao","permalink":"/docs/integracoes/integracao-via-api/vinculacao","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introdu\xe7\xe3o","permalink":"/docs/integracoes/integracao-via-api/introducao"},"next":{"title":"Pagamento","permalink":"/docs/integracoes/integracao-via-api/pamagemto"}}');var a=s(4848),r=s(8453);const i={sidebar_position:2},c="Vincula\xe7\xe3o",d={},t=[{value:"Fluxo de Vincula\xe7\xe3o",id:"fluxo-de-vincula\xe7\xe3o",level:2},{value:"Requisi\xe7\xe3o",id:"requisi\xe7\xe3o",level:2},{value:"Resposta de Sucesso",id:"resposta-de-sucesso",level:2},{value:"Webhook Recebido ap\xf3s leitura",id:"webhook-recebido-ap\xf3s-leitura",level:2},{value:"\ud83d\udd12 Regras Importantes",id:"-regras-importantes",level:2},{value:"\u25b6\ufe0f Pr\xf3ximos passos",id:"\ufe0f-pr\xf3ximos-passos",level:2}];function l(e){const o={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.header,{children:(0,a.jsx)(o.h1,{id:"vincula\xe7\xe3o",children:"Vincula\xe7\xe3o"})}),"\n",(0,a.jsx)(o.p,{children:"Antes de qualquer transa\xe7\xe3o, o POS precisa estar vinculado a um ponto de venda (PDV ou sistema ERP). Esse processo associa o POS ao sistema e define o webhook que receber\xe1 os eventos."}),"\n",(0,a.jsx)(o.hr,{}),"\n",(0,a.jsx)(o.h2,{id:"fluxo-de-vincula\xe7\xe3o",children:"Fluxo de Vincula\xe7\xe3o"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"Seu sistema solicita um QR Code."}),"\n",(0,a.jsx)(o.li,{children:"Voc\xea exibe esse QR Code na tela para o operador."}),"\n",(0,a.jsx)(o.li,{children:"O operador usa o aplicativo embarcado no POS para escanear o QR Code."}),"\n",(0,a.jsx)(o.li,{children:"O ConnectTEF envia os dados da vincula\xe7\xe3o para o webhook informado."}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.img,{alt:"img_1.png",src:s(3829).A+"",width:"1169",height:"725"})}),"\n",(0,a.jsx)(o.hr,{}),"\n",(0,a.jsx)(o.h2,{id:"requisi\xe7\xe3o",children:"Requisi\xe7\xe3o"}),"\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"M\xe9todo:"})," ",(0,a.jsx)(o.code,{children:"GET"}),"\r\n",(0,a.jsx)(o.strong,{children:"Endpoint:"})]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-http",children:"https://apitef.pdvpos.com.br/api/v1/web-service/qrcode\n"})}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.strong,{children:"Query Params:"})}),"\n",(0,a.jsxs)(o.table,{children:[(0,a.jsx)(o.thead,{children:(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.th,{children:"Par\xe2metro"}),(0,a.jsx)(o.th,{children:"Obrigat\xf3rio"}),(0,a.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,a.jsxs)(o.tbody,{children:[(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:(0,a.jsx)(o.code,{children:"numeroSerie"})}),(0,a.jsx)(o.td,{children:"Sim"}),(0,a.jsxs)(o.td,{children:["Identificador \xfanido da automa\xe7\xe3o (ex: ",(0,a.jsx)(o.code,{children:"caixa001"}),")"]})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:(0,a.jsx)(o.code,{children:"callbackUrl"})}),(0,a.jsx)(o.td,{children:"Sim"}),(0,a.jsx)(o.td,{children:"URL do seu webhook que receber\xe1 os dados da vincula\xe7\xe3o"})]}),(0,a.jsxs)(o.tr,{children:[(0,a.jsx)(o.td,{children:(0,a.jsx)(o.code,{children:"callbackToken"})}),(0,a.jsx)(o.td,{children:"N\xe3o"}),(0,a.jsxs)(o.td,{children:["Token que ser\xe1 enviado no header ",(0,a.jsx)(o.code,{children:"token"})," do webhook"]})]})]})]}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.strong,{children:"Exemplo de chamada:"})}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-http",children:"GET https://apitef.pdvpos.com.br/api/v1/web-service/qrcode?numeroSerie=caixa001&callbackUrl=https://webhook.com.br/response&callbackToken=abc1234\n"})}),"\n",(0,a.jsx)(o.hr,{}),"\n",(0,a.jsx)(o.h2,{id:"resposta-de-sucesso",children:"Resposta de Sucesso"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-json",children:'{\r\n  "qrCode": "9512aad025a1ae..."\r\n}\n'})}),"\n",(0,a.jsxs)(o.blockquote,{children:["\n",(0,a.jsxs)(o.p,{children:["Basta criar um QR Code a partir do campo ",(0,a.jsx)(o.code,{children:"qrCode"})," e exibir na tela para que o POS possa escanear."]}),"\n"]}),"\n",(0,a.jsx)(o.hr,{}),"\n",(0,a.jsx)(o.h2,{id:"webhook-recebido-ap\xf3s-leitura",children:"Webhook Recebido ap\xf3s leitura"}),"\n",(0,a.jsxs)(o.p,{children:["Ap\xf3s o POS escanear o QR Code com sucesso, o ConnectTEF envia para o ",(0,a.jsx)(o.code,{children:"callbackUrl"})," informado:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-json",children:'{\r\n  "uuidTerminal": "abc123",\r\n  "rede": "Mercado Pago",\r\n  "numeroSerieTerminal": "abc123",\r\n  "ipLocal": "192.168.0.25",\r\n  "macAddress": "74:F7:F...",\r\n  "cnpjEmpresa": "42580012000182"\r\n}\n'})}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.strong,{children:"Headers:"})}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"token: abc1234\n"})}),"\n",(0,a.jsx)(o.hr,{}),"\n",(0,a.jsx)(o.h2,{id:"-regras-importantes",children:"\ud83d\udd12 Regras Importantes"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:["Toda requisi\xe7\xe3o futura ",(0,a.jsxs)(o.strong,{children:["deve usar o mesmo ",(0,a.jsx)(o.code,{children:"cpf"})," ou ",(0,a.jsx)(o.code,{children:"cnpj"})," (obtido na vincula\xe7\xe3o)"]})," e o ",(0,a.jsx)(o.code,{children:"numeroSerie"})," utilizado na requisi\xe7\xe3o do QR Code."]}),"\n",(0,a.jsx)(o.li,{children:"Um POS pode ser atribu\xeddo a v\xe1rios PDVs."}),"\n",(0,a.jsx)(o.li,{children:"Um PDV pode ser atribu\xeddo a v\xe1rios POSs."}),"\n",(0,a.jsx)(o.li,{children:"O token \xe9 opcional, mas fortemente recomendado para validar as chamadas recebidas."}),"\n"]}),"\n",(0,a.jsx)(o.hr,{}),"\n",(0,a.jsx)(o.h2,{id:"\ufe0f-pr\xf3ximos-passos",children:"\u25b6\ufe0f Pr\xf3ximos passos"}),"\n",(0,a.jsx)(o.p,{children:"Agora que voc\xea j\xe1 entendeu o funcionamento a vincula\xe7\xe3o, acesse o pr\xf3ximo t\xf3pico."})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},3829:(e,o,s)=>{s.d(o,{A:()=>n});const n=s.p+"assets/images/img_1-ff077e4ba690a69074180bf7322f8b30.png"},8453:(e,o,s)=>{s.d(o,{R:()=>i,x:()=>c});var n=s(6540);const a={},r=n.createContext(a);function i(e){const o=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(r.Provider,{value:o},e.children)}}}]);