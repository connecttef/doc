"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[5944],{7728:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"integracoes/integracao-via-api/pamagemto","title":"Endpoint: Pagamento","description":"Realiza o envio de uma solicita\xe7\xe3o de pagamento para o Smart POS associado ao n\xfamero de s\xe9rie informado. A transa\xe7\xe3o pode ser executada imediatamente ou apenas enviada para a fila, aguardando execu\xe7\xe3o manual no terminal.","source":"@site/docs/integracoes/integracao-via-api/pamagemto.md","sourceDirName":"integracoes/integracao-via-api","slug":"/integracoes/integracao-via-api/pamagemto","permalink":"/docs/integracoes/integracao-via-api/pamagemto","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Par\xe2metros da API","permalink":"/docs/integracoes/integracao-via-api/parametros-api"},"next":{"title":"Endpoint: Estorno","permalink":"/docs/integracoes/integracao-via-api/estorno"}}');var r=n(4848),t=n(8453);const i={sidebar_position:4},s="Endpoint: Pagamento",d={},c=[{value:"Endpoint",id:"endpoint",level:3},{value:"Par\xe2metros de Query",id:"par\xe2metros-de-query",level:3},{value:"Corpo da Requisi\xe7\xe3o (Request Body)",id:"corpo-da-requisi\xe7\xe3o-request-body",level:3},{value:"Estrutura do Webhook",id:"estrutura-do-webhook",level:3}];function l(e){const a={blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"endpoint-pagamento",children:"Endpoint: Pagamento"})}),"\n",(0,r.jsxs)(a.p,{children:["Realiza o envio de uma solicita\xe7\xe3o de ",(0,r.jsx)(a.strong,{children:"pagamento"})," para o Smart POS associado ao n\xfamero de s\xe9rie informado. A transa\xe7\xe3o pode ser ",(0,r.jsx)(a.strong,{children:"executada imediatamente"})," ou apenas ",(0,r.jsx)(a.strong,{children:"enviada para a fila"}),", aguardando execu\xe7\xe3o manual no terminal."]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-http",children:"POST /web-service/pagamento\n"})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h3,{id:"par\xe2metros-de-query",children:"Par\xe2metros de Query"}),"\n",(0,r.jsxs)(a.table,{children:[(0,r.jsx)(a.thead,{children:(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.th,{children:"Par\xe2metro"}),(0,r.jsx)(a.th,{children:"Exemplo"}),(0,r.jsx)(a.th,{children:"Obrigat\xf3rio"}),(0,r.jsx)(a.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(a.tbody,{children:[(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:"numeroSerie"}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.code,{children:"pdv001"})}),(0,r.jsx)(a.td,{children:"Sim"}),(0,r.jsx)(a.td,{children:"N\xfamero de s\xe9rie do PDV vinculado ao POS"})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:"CPFCNPJ"}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.code,{children:"00.000.000/0000-00"})}),(0,r.jsx)(a.td,{children:"Sim"}),(0,r.jsx)(a.td,{children:"CPF ou CNPJ vinculado ao Smart POS"})]})]})]}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsxs)(a.p,{children:["\ud83d\udca1 ",(0,r.jsx)(a.strong,{children:"Notas importantes"})]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["O ",(0,r.jsx)(a.code,{children:"CPFCNPJ"})," deve ser o mesmo configurado no POS."]}),"\n",(0,r.jsxs)(a.li,{children:["O ",(0,r.jsx)(a.code,{children:"numeroSerie"})," deve estar vinculado a um terminal homologado."]}),"\n",(0,r.jsxs)(a.li,{children:["A ",(0,r.jsx)(a.code,{children:"callbackUrl"})," deve ser p\xfablica e estar apta a receber requisi\xe7\xf5es POST com os dados da transa\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h3,{id:"corpo-da-requisi\xe7\xe3o-request-body",children:"Corpo da Requisi\xe7\xe3o (Request Body)"}),"\n",(0,r.jsx)(a.p,{children:"A requisi\xe7\xe3o deve ser enviada como um array de objetos JSON, cada um representando uma transa\xe7\xe3o:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-json",children:'[\r\n  {\r\n    "identificacao": "abc123",\r\n    "tipoTransacao": 10,\r\n    "quantidadeParcelas": 1,\r\n    "valorTotal": 29.90,\r\n    "imprimirComprovante": true,\r\n    "callbackUrl": "https://meu-webhook.com.br/response",\r\n    "callbackToken": "secret-token-webhook",\r\n    "naoExecutar": true,\r\n    "comanda": {\r\n      "identificador": "Ismael Almeida",\r\n      "itens": [\r\n        {\r\n          "titulo": "Coca cola",\r\n          "descri\xe7\xe3o": "Bem gelada"\r\n        }\r\n      ],\r\n      "endereco": "R. Humberto I, 1005 - Vila Mariana"\r\n    }\r\n  }\r\n]\n'})}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsxs)(a.blockquote,{children:["\n",(0,r.jsxs)(a.p,{children:["\ud83d\udca1 ",(0,r.jsx)(a.strong,{children:"Observa\xe7\xf5es"})]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Quando ",(0,r.jsx)(a.code,{children:'"naoExecutar": true'}),", a solicita\xe7\xe3o ",(0,r.jsx)(a.strong,{children:"n\xe3o \xe9 executada automaticamente"}),", sendo exibida como uma cobran\xe7a pendente no terminal."]}),"\n",(0,r.jsxs)(a.li,{children:["O campo ",(0,r.jsx)(a.code,{children:"comanda"})," permite exibir ",(0,r.jsx)(a.strong,{children:"informa\xe7\xf5es adicionais"})," como nome do cliente, endere\xe7o e itens consumidos."]}),"\n",(0,r.jsxs)(a.li,{children:["Se voc\xea ",(0,r.jsxs)(a.strong,{children:["n\xe3o enviar o campo ",(0,r.jsx)(a.code,{children:"tipoTransacao"})]}),", o operador poder\xe1 selecionar a forma de pagamento diretamente no POS no momento da execu\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.hr,{}),"\n",(0,r.jsx)(a.h3,{id:"estrutura-do-webhook",children:"Estrutura do Webhook"}),"\n",(0,r.jsxs)(a.p,{children:["A URL informada no campo ",(0,r.jsx)(a.code,{children:"callbackUrl"})," receber\xe1 uma requisi\xe7\xe3o ",(0,r.jsx)(a.code,{children:"POST"})," com o conte\xfado no formato JSON contendo os dados da transa\xe7\xe3o."]}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.strong,{children:"Exemplo de payload recebido:"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-json",children:'{\r\n\t"bandeiraCartao": "VISA",\r\n\t"cnpj": "00.000.000/0000-00",\r\n\t"codigoAutorizacaoTransacao": "000000",\r\n\t"dataTransacaoComprovante": "14052025",\r\n\t"executada": true,\r\n\t"finalizacao": "000000|000000|000000",\r\n\t"horaTransacaoComprovante": "133836",\r\n\t"identificacao": "abc123",\r\n\t"nomeRede": "STONE",\r\n\t"numeroTransacao": "000000",\r\n\t"quantidadeParcelas": "1",\r\n\t"razaoSocial": "Loja X",\r\n\t"statusTransacao": "0",\r\n\t"timestampTransacaoHost": "1405133836",\r\n\t"tipoTransacao": "10",\r\n\t"valorTotal": "11.00"\r\n}\n'})})]})}function m(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>s});var o=n(6540);const r={},t=o.createContext(r);function i(e){const a=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:a},e.children)}}}]);